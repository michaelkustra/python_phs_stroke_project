import pandas as pd
stroke_activity_hb = pd.read_csv('raw_data/stroke_activitybyhbr.csv')
stroke_activity_hb.shape
stroke_activity_hb.describe()
from janitor import clean_names
from janitor import clean_names
stroke_activity_hb_reduced = stroke_activity_hb.drop(columns = ['hbrqf', 'admission_type_QF', 'age_group_qf', 'sex_qf', 'number_of_discharges_qf', 'crude_rate_qf'])
stroke_activity_hb_reduced = r.stroke_activity_hb.drop(columns = ['hbrqf', 'admission_type_QF', 'age_group_qf', 'sex_qf', 'number_of_discharges_qf', 'crude_rate_qf'])
stroke_activity_hb_reduced = r.stroke_activity_hb.drop(columns = ['hbrqf', 'admission_type_qf', 'age_group_qf', 'sex_qf', 'number_of_discharges_qf', 'crude_rate_qf'])
stroke_activity_hb_reduced.groupby('diagnosis').sum()
stroke_activity_hb_reduced.groupby('diagnosis').mean()
stroke_activity_hb_reduced.query('admission_type == "All" & age_group == "All" & sex == "All"')
common_df = stroke_activity_hb_reduced.query('admission_type == "All" & age_group == "All" & sex == "All"')
common_df.groupby(diagnosis).sum()
common_df.groupby('diagnosis').sum()
common_df.groupby('financial_year', 'diagnosis').sum()
common_df.groupby('financial_year', 'diagnosis').sum()
common_df.groupby(['financial_year', 'diagnosis']).sum()
common_df.groupby('diagnosis').mean()
common_df.groupby('diagnosis').sum()
common_df.groupby(['financial_year', 'diagnosis']).sum()
common_df.groupby('diagnosis').mean()
common_df.groupby(['financial_year', 'diagnosis'])
common_df.groupby(['financial_year', 'diagnosis']).mean()
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
common_df.query('diagnosis == [("Subarachnoid Haemorrhage", "TIAs and related syndromes")]')
plot_df = common_df.query('diagnosis == [("Subarachnoid Haemorrhage", "TIAs and related syndromes")]')
plot_df = common_df.query('diagnosis == "Subarachnoid Haemorrhage" & diagnosis == "TIAs and related syndromes"')
plot_df = common_df.query('diagnosis == "Subarachnoid Haemorrhage"')
plot_df = common_df.query('diagnosis == "Subarachnoid Haemorrhage" | diagnosis == "TIAs and related syndromes"')
plt.style.use('ggplot')
x = ['Nuclear', 'Hydro', 'Gas', 'Oil', 'Coal', 'Biofuel']
energy = [5, 6, 15, 22, 24, 8]
x_pos = [i for i, _ in enumerate(x)]
plt.bar(x_pos, energy, color='green')
plt.xlabel("Energy Source")
plt.ylabel("Energy Output (GJ)")
plt.title("Energy output from various fuel sources")
plt.xticks(x_pos, x)
plt.show()
plot_df.groupby(financial_year).sum()
plot_df.groupby('financial_year').sum()
plot_df.groupby(['financial_year', 'diagnosis']).sum()
y_sub_haem = [2810, 2546, 2760, 3366, 3468, 3884, 3576, 3546, 3444, 3542]
plot_df.groupby(['financial_year', 'diagnosis']).sum()
z_tia = [6202, 6746, 7104, 6782, 7644, 7646, 7578, 8872, 9638, 8874]
plot_df.groupby(['financial_year', 'diagnosis']).sum()
x = ['09/10', '10/11', '11/12', '12/13', '13/14', '14/15', '15/16', '16/17', '17/18', '18/19']
x = ['09/10', '10/11', '11/12', '12/13', '13/14', '14/15', '15/16', '16/17', '17/18', '18/19']
y_sub_haem = [2810, 2546, 2760, 3366, 3468, 3884, 3576, 3546, 3444, 3542]
z_tia = [6202, 6746, 7104, 6782, 7644, 7646, 7578, 8872, 9638, 8874]
X_axis = np.arange(len(x))
plt.bar(X_axis - 0.2, y_sub_haem, 0.4, label = 'Subarachnoid Haemorrhage')
plt.bar(X_axis + 0.2, z_tia, 0.4, label = 'TIAs')
plt.xticks(X_axis, x)
plt.xlabel("Years")
plt.ylabel("Total Number of Discharges")
plt.title("Total Discharges in each Stroke Type by Year")
plt.legend()
plt.show()
# first plot
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
plt.style.use('ggplot')
plot_df = common_df.query('diagnosis == "Subarachnoid Haemorrhage" | diagnosis == "TIAs and related syndromes"')
plot_df.groupby(['financial_year', 'diagnosis']).sum()
x = ['09/10', '10/11', '11/12', '12/13', '13/14', '14/15', '15/16', '16/17', '17/18', '18/19']
y_sub_haem = [2810, 2546, 2760, 3366, 3468, 3884, 3576, 3546, 3444, 3542]
z_tia = [6202, 6746, 7104, 6782, 7644, 7646, 7578, 8872, 9638, 8874]
X_axis = np.arange(len(x))
plt.bar(X_axis - 0.2, y_sub_haem, 0.4, label = 'Subarachnoid Haemorrhage')
plt.bar(X_axis + 0.2, z_tia, 0.4, label = 'TIAs and related syndromes')
plt.xticks(X_axis, x)
plt.xlabel("Years")
plt.ylabel("Total Number of Discharges")
plt.title("Total Discharges in each Stroke Type by Year")
plt.legend()
plt.show()
library(reticulate)
library(janitor)
reticulate::repl_python()
library(tidyverse)
py$stroke_activity_hb %>%
distinct(Diagnosis)
# clean names using janitor package
stroke_activity_hb <- py$stroke_activity_hb %>%
clean_names()
reticulate::repl_python()
