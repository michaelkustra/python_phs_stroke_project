# load in data
import pandas as pd
from pyprojroot import here
stroke_activity_hb = pd.read_csv(here('raw_data/stroke_activitybyhbr.csv'))
stroke_activity_ca = pd.read_csv(here('raw_data/stroke_activitybyca.csv'))
# remove unnecessary columns in health board data
stroke_activity_hb_reduced = r.stroke_activity_hb.drop(columns = ['hbrqf', 'admission_type_qf', 'age_group_qf', 'sex_qf', 'number_of_discharges_qf', 'crude_rate_qf'])
# remove unnecessary columns in council area data
stroke_activity_ca_reduced = r.stroke_activity_ca.drop(columns = ['caqf', 'admission_type_qf', 'age_group_qf', 'sex_qf', 'number_of_discarges_qf', 'crude_rate_qf'])
# filter for Scotland wide stroke numbers for all patients by health board
common_df = stroke_activity_hb_reduced.query('admission_type == "All" & age_group == "All" & sex == "All"')
# filter for Scotland wide stroke numbers for all patients by council area
ca_common_df = stroke_activity_ca_reduced.query('admission_type == "All" & age_group == "All" & sex == "All"')
# health board aggregation
hb_cases = common_df.query('diagnosis != "Cerebrovascular Disease"')
hb_cases = hb_cases.drop(columns = 'number_of_discharges')
hb_cases = hb_cases.groupby('financial_year')['crude_rate'].mean().reset_index()
# council area aggregation
ca_cases = ca_common_df.query('diagnosis != "Cerebrovascular Disease"')
ca_cases = ca_cases.drop(columns = 'number_of_discharges')
ca_cases = ca_cases.groupby('financial_year')['crude_rate'].mean().reset_index()
# rename crude rate columns to be unique in health board and council area data
ca_cases.rename(columns = {'crude_rate':'ca_crude_rate'}, inplace = True)
hb_cases.rename(columns = {'crude_rate':'hb_crude_rate'}, inplace = True)
# join ca and hb data sets
ca_hb_combined_df = hb_cases.merge(ca_cases, how='inner', on='financial_year')
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Line y')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Line z')
plt.legend()
plt.show()
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Line y')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Line z')
plt.legend()
plt.show()
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Line y')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Line z')
plt.xticks(rotation = 45)
plt.legend()
plt.show()
plt.xticks(rotation = 60)
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Line y')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Line z')
plt.xticks(rotation = 60)
plt.legend()
plt.show()
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Line y')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Line z')
plt.xticks(rotation = 30)
plt.legend()
plt.show()
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
plt.style.use('ggplot')
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Line y')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Line z')
plt.xticks(rotation = 30)
plt.legend()
plt.show()
import matplotlib
import matplotlib.pyplot as plt
import numpy as np
plt.style.use('ggplot')
# Plot a simple line chart
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['hb_crude_rate'], color='g', label='Health Board')
# Plot another line on the same chart/graph
plt.plot(ca_hb_combined_df['financial_year'], ca_hb_combined_df['ca_crude_rate'], color='r', label='Council Area')
plt.xticks(rotation = 30)
plt.legend()
plt.title('Mean Crude Rate in Health Board vs Council Area')
plt.ylabel('Mean Crude Rate')
plt.show()
library(reticulate)
library(janitor)
reticulate::repl_python()
library(tidyverse)
py$stroke_activity_hb %>%
distinct(Diagnosis)
# clean health board data names using janitor package
stroke_activity_hb <- py$stroke_activity_hb %>%
clean_names()
# clean council area data names
stroke_activity_ca <- py$stroke_activity_ca %>%
clean_names()
reticulate::repl_python()
