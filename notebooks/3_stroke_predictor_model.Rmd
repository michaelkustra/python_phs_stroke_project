---
title: "R Notebook"
output: html_notebook
---

```{python}
import pandas as pd
from pyprojroot import here
```

```{r}
library(reticulate)
library(tidyverse)
py_install("pandas-profiling")
py_install("scikit-learn")
```

```{python}
# model packages
import pandas_profiling
from sklearn.linear_model import LinearRegression
# profile_to_file(nnnn.html)
```

```{python}
# read in mortality data
hb_mortality = pd.read_csv(here("raw_data/stroke_mortalitybyhbr.csv"))
ca_mortality = pd.read_csv(here("raw_data/stroke_mortalitybyca.csv"))
```

```{r}
hb_mortality <- py$hb_mortality %>% 
  janitor::clean_names()
```

```{python}
# clean data by removing unnecessary columns and values
hb_mortality_reduced = r.hb_mortality.drop(columns = ['hbrqf', 'age_group_qf', 'sex_qf', 'number_of_deaths_qf', 'crude_rate_qf'])

hb_mortality_reduced = hb_mortality_reduced.query('age_group != "All" & sex != "All"')
```

```{python}
# assign categorical vars dummies
hb_mortality_reduced = pd.get_dummies(hb_mortality_reduced, drop_first = True)

hb_mortality_reduced.head()
```


```{python}
# set our response array 
response_var = hb_mortality_reduced['number_of_deaths']
# put our predictors in a data frame
predictor_vars = hb_mortality_reduced.drop(columns = 'number_of_deaths')
```
```{python}
hb_mortality_reduced.isna().sum()
```

```{python}
# define model
mortality_model = LinearRegression()

mortality_model.fit(predictor_vars, response_var)
```

